@using Microsoft.AspNetCore.Components
@inherits FlowbiteComponentBase

@if (Style == AccordionStyle.Separated)
{
    <div class="@GetItemClasses()" @attributes="AdditionalAttributes">
        <h2 id="@GetHeaderId()">
            <button type="button"
                    class="@GetHeaderClasses()"
                    @onclick="HandleToggle"
                    @onkeydown="HandleKeyDown"
                    aria-expanded="@GetIsOpen().ToString().ToLower()"
                    aria-controls="@GetBodyId()">
                <span>@HeaderContent</span>
            @if (Icon != null)
            {
                <DynamicComponent Type="@Icon.GetType()" Parameters="@(new Dictionary<string, object>
                {
                    { "class", GetIconClasses() },
                    { "aria-hidden", true }
                })" />
            }
            else
            {
                <svg class="@GetIconClasses()" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m5 15 7-7 7 7"/>
                </svg>
            }
            </button>
        </h2>
        <div id="@GetBodyId()"
             class="@GetBodyClasses() @GetBodyAnimationClasses() overflow-hidden"
             aria-labelledby="@GetHeaderId()"
             style="@GetBodyStyle()">
            <div class="@GetContentClasses()">
                @ChildContent
            </div>
        </div>
    </div>
}
else
{
    <h2 id="@GetHeaderId()">
        <button type="button"
                class="@GetHeaderClasses()"
                @onclick="HandleToggle"
                @onkeydown="HandleKeyDown"
                aria-expanded="@GetIsOpen().ToString().ToLower()"
                aria-controls="@GetBodyId()">
            <span>@HeaderContent</span>
            @if (Icon != null)
            {
                <DynamicComponent Type="@Icon.GetType()" Parameters="@(new Dictionary<string, object>
                {
                    { "class", GetIconClasses() },
                    { "aria-hidden", true }
                })" />
            }
            else
            {
                <svg class="@GetIconClasses()" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m5 15 7-7 7 7"/>
                </svg>
            }
        </button>
    </h2>
    <div id="@GetBodyId()"
         class="@GetBodyClasses() @GetBodyAnimationClasses() overflow-hidden"
         aria-labelledby="@GetHeaderId()"
         style="@GetBodyStyle()">
        <div class="@GetContentClasses()">
            @ChildContent
        </div>
    </div>
}

